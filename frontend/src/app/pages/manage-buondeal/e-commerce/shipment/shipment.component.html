<mat-sidenav-container style="background-color: white; margin:3%">
    <mat-sidenav-content class="account-content custom-overflow" ngClass.gt-sm="p-left">

        <div>
            <div fxLayout="row">
                <button mat-raised-button (click)=" addShipment()" color="accent" style=" float:right !important"
                    [disabled]="isFreeShipment">
                    Aggiungi Spedizione</button>
            </div>

            <form [formGroup]="generalFormGroup">
                <div formArrayName="shipments"
                    *ngFor="let item of generalFormGroup.get('shipments').controls; let i = index;" class="mt-2">
                    <div [formGroupName]="i">

                        <mat-divider></mat-divider>
                        <div fxLayout="row" fxLayoutAlign="space-between center" class="header-row text-muted">
                            <h1>Spedizione #{{i + 1}}</h1>
                            <button mat-fab *ngIf="i != 0" (click)="removeShipment(i)" color="warn" class="mt-1"
                                style="margin-right: 30px">
                                <mat-icon>cancel</mat-icon>
                            </button>
                        </div>

                        <div fxLayout="row" class="text-muted w-100 mt-1">
                            <mat-form-field class="mt-2" style="width: 50%;" appearance="outline">
                                <mat-label>Spedizionere</mat-label>
                                <mat-select formControlName="idForwarder" placeholder="Job Type"
                                    [disableControl]="isFreeShipment">
                                    <mat-option *ngFor="let forwarder of forwarderList" [value]="forwarder.id">
                                        {{ forwarder.name }}
                                    </mat-option>
                                </mat-select>
                                <mat-error
                                    *ngIf="generalFormGroup.controls.shipments.controls[i].controls.idForwarder.errors?.required">
                                    Campo Obbligatorio</mat-error>
                            </mat-form-field>
                        </div>

                        <div fxLayout="row" class="text-muted w-100 mt-1">
                            <!-- <form [formGroup]="loginForm" (ngSubmit)="onLoginFormSubmit(loginForm.value)"> -->
                            <mat-form-field class="mt-2" style="width: 50%;" appearance="outline">
                                <mat-label>Costo Spedizione ( in â‚¬ )</mat-label>
                                <input matInput formControlName="shipmentCost" [disableControl]="isFreeShipment"
                                    appTwoDigitDecimaNumber>
                                <mat-error
                                    *ngIf="generalFormGroup.controls.shipments.controls[i].controls.shipmentCost.errors?.required">
                                    Campo Obbligatorio</mat-error>
                            </mat-form-field>
                        </div>

                        <div fxLayout="row" class="text-muted w-100 mt-1">
                            <!-- <form [formGroup]="loginForm" (ngSubmit)="onLoginFormSubmit(loginForm.value)"> -->
                            <mat-form-field class="mt-2" style="width: 50%;" appearance="outline">
                                <mat-label>Tempo Stimato di consegna in gg</mat-label>
                                <input matInput formControlName="deliveryExtimatedTime" (keypress)="numberOnly($event)">
                                <mat-error
                                    *ngIf="generalFormGroup.controls.shipments.controls[i].controls.deliveryExtimatedTime.errors?.required">
                                    Campo Obbligatorio</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <div fxLayout="row" class=" text-muted w-100 mt-3">
            <mat-checkbox value="isFreeShipment" (click)="changeValue(isFreeShipment)">Offri la spedizione gratuita
            </mat-checkbox>
        </div>


    </mat-sidenav-content>
</mat-sidenav-container>